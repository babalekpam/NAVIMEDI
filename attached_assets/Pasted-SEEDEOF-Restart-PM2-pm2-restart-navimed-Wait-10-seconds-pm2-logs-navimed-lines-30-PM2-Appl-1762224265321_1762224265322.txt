SEEDEOF

# Restart PM2
pm2 restart navimed

# Wait 10 seconds
pm2 logs navimed --lines 30
[PM2] Applying action stopProcessId on app [navimed](ids: [ 0 ])
[PM2] [navimed](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 0        â”‚ 0      â”‚ 0    â”‚ stopped   â”‚ 0%       â”‚ 0b       â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ERROR:  permission denied to create database
No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/vhosts/navimedi.org/httpdocs/NaviMed/drizzle.config.ts'
Using 'pg' driver for database querying
[â£·] Pulling schema from database...
error: database "navimed" does not exist
    at /var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.query (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-kit/bin.cjs:80621:26)
    at async fromDatabase2 (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-kit/bin.cjs:19276:25) {
  length: 92,
  severity: 'FATAL',
  code: '3D000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'postinit.c',
  line: '878',
  routine: 'InitPostgres'
}
psql: error: FATAL:  database "navimed" does not exist
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [navimed](ids: [ 0 ])
[PM2] [navimed](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1054056  â”‚ 0s     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 18.1mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[TAILING] Tailing last 30 lines for [navimed] process (change the value with --lines option)
/root/.pm2/logs/navimed-out-0.log last 30 lines:
0|navimed  | 2:43:15 AM [express] ğŸŒ Initializing countries first...
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | 2:43:16 AM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1
0|navimed  | 2:43:26 AM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 2:43:28 AM [express] ğŸŒ Initializing countries first...
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | 2:43:28 AM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1
0|navimed  | ğŸ§ª Registering simple test routes...
0|navimed  | âœ… Simple test routes registered successfully
0|navimed  | ğŸ”’ Applying security middleware for BREACH protection...
0|navimed  | ğŸ“¦ Registering inventory management routes...
0|navimed  | âœ… Inventory management routes registered successfully
0|navimed  | ğŸ“š Registering patient engagement routes...
0|navimed  | âœ… Patient engagement routes registered successfully
0|navimed  | ğŸ”§ Registering developer portal routes...
0|navimed  | âœ… Developer portal routes registered successfully
0|navimed  | ğŸ“Š Registering analytics routes...
0|navimed  | ğŸ“Š Skipping duplicate platform-stats registration (exists in routes.ts)
0|navimed  | âœ… Analytics routes registered successfully
0|navimed  | ğŸ¥ Registering DICOM medical imaging routes...
0|navimed  | âœ… DICOM medical imaging routes registered successfully
0|navimed  | âœ… BI Reports endpoints registered successfully
0|navimed  | Server running on port 5000
0|navimed  | 2:43:37 AM [express] serving on port 5000
0|navimed  | 2:43:39 AM [express] ğŸŒ Initializing countries first...
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | 2:43:39 AM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1

/root/.pm2/logs/navimed-error-0.log last 30 lines:
0|navimed  |       _closeFrameSent: false,
0|navimed  |       _closeMessage: <Buffer >,
0|navimed  |       _closeTimer: null,
0|navimed  |       _errorEmitted: true,
0|navimed  |       _extensions: {},
0|navimed  |       _paused: false,
0|navimed  |       _protocol: '',
0|navimed  |       _readyState: 3,
0|navimed  |       _receiver: null,
0|navimed  |       _sender: null,
0|navimed  |       _socket: null,
0|navimed  |       _bufferedAmount: 0,
0|navimed  |       _isServer: false,
0|navimed  |       _redirects: 0,
0|navimed  |       _autoPong: true,
0|navimed  |       _url: 'wss://localhost/v2',
0|navimed  |       _req: null,
0|navimed  |       [Symbol(shapeMode)]: false,
0|navimed  |       [Symbol(kCapture)]: false
0|navimed  |     },
0|navimed  |     [Symbol(kType)]: 'error',
0|navimed  |     [Symbol(kError)]: AggregateError [ECONNREFUSED]: 
0|navimed  |         at internalConnectMultiple (node:net:1122:18)
0|navimed  |         at afterConnectMultiple (node:net:1689:7) {
0|navimed  |       code: 'ECONNREFUSED',
0|navimed  |       [errors]: [Array]
0|navimed  |     },
0|navimed  |     [Symbol(kMessage)]: ''
0|navimed  |   }
0|navimed  | }

0|navimed  | 2:43:49 AM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 2:43:51 AM [express] ğŸŒ Initializing countries first...
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | âŒ Error initializing default countries: DrizzleQueryError: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1
0|navimed  |     at NeonPreparedQuery.queryWithCache (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-orm/pg-core/session.js:41:15)
0|navimed  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|navimed  |     at async NeonPreparedQuery.execute (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-orm/neon-serverless/session.js:109:20)
0|navimed  |     at async initializeDefaultCountries (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:23696:29)
0|navimed  |     at async initializePlatform (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:23804:5) {
0|navimed  |   query: 'select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2',
0|navimed  |   params: [ 'NG', 1 ],
0|navimed  |   cause: ErrorEvent {
0|navimed  |     [Symbol(kTarget)]: WebSocket {
0|navimed  |       _events: [Object: null prototype],
0|navimed  |       _eventsCount: 4,
0|navimed  |       _maxListeners: undefined,
0|navimed  |       _binaryType: 'arraybuffer',
0|navimed  |       _closeCode: 1006,
0|navimed  |       _closeFrameReceived: false,
0|navimed  |       _closeFrameSent: false,
0|navimed  |       _closeMessage: <Buffer >,
0|navimed  |       _closeTimer: null,
0|navimed  |       _errorEmitted: true,
0|navimed  |       _extensions: {},
0|navimed  |       _paused: false,
0|navimed  |       _protocol: '',
0|navimed  |       _readyState: 3,
0|navimed  |       _receiver: null,
0|navimed  |       _sender: null,
0|navimed  |       _socket: null,
0|navimed  |       _bufferedAmount: 0,
0|navimed  |       _isServer: false,
0|navimed  |       _redirects: 0,
0|navimed  |       _autoPong: true,
0|navimed  |       _url: 'wss://localhost/v2',
0|navimed  |       _req: null,
0|navimed  |       [Symbol(shapeMode)]: false,
0|navimed  |       [Symbol(kCapture)]: false
0|navimed  |     },
0|navimed  |     [Symbol(kType)]: 'error',
0|navimed  |     [Symbol(kError)]: AggregateError [ECONNREFUSED]: 
0|navimed  |         at internalConnectMultiple (node:net:1122:18)
0|navimed  |         at afterConnectMultiple (node:net:1689:7) {
0|navimed  |       code: 'ECONNREFUSED',
0|navimed  |       [errors]: [Array]
0|navimed  |     },
0|navimed  |     [Symbol(kMessage)]: ''
0|navimed  |   }
0|navimed  | }
0|navimed  | 2:43:51 AM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1
0|navimed  | Platform initialization error: DrizzleQueryError: Failed query: select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2
0|navimed  | params: NG,1
0|navimed  |     at NeonPreparedQuery.queryWithCache (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-orm/pg-core/session.js:41:15)
0|navimed  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|navimed  |     at async NeonPreparedQuery.execute (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/drizzle-orm/neon-serverless/session.js:109:20)
0|navimed  |     at async initializePlatform (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:23805:28) {
0|navimed  |   query: 'select "id", "code", "name", "region", "is_active", "cpt_code_system", "icd10_code_system", "pharmaceutical_code_system", "currency_code", "date_format", "time_zone", "created_at", "updated_at" from "countries" where "countries"."code" = $1 limit $2',
0|navimed  |   params: [ 'NG', 1 ],
0|navimed  |   cause: ErrorEvent {
0|navimed  |     [Symbol(kTarget)]: WebSocket {
0|navimed  |       _events: [Object: null prototype],
0|navimed  |       _eventsCount: 4,
0|navimed  |       _maxListeners: undefined,
0|navimed  |       _binaryType: 'arraybuffer',
0|navimed  |       _closeCode: 1006,
0|navimed  |       _closeFrameReceived: false,
0|navimed  |       _closeFrameSent: false,
0|navimed  |       _closeMessage: <Buffer >,
0|navimed  |       _closeTimer: null,
0|navimed  |       _errorEmitted: true,
0|navimed  |       _extensions: {},
0|navimed  |       _paused: false,
0|navimed  |       _protocol: '',
0|navimed  |       _readyState: 3,
0|navimed  |       _receiver: null,
0|navimed  |       _sender: null,
0|navimed  |       _socket: null,
0|navimed  |       _bufferedAmount: 0,
0|navimed  |       _isServer: false,
0|navimed  |       _redirects: 0,
0|navimed  |       _autoPong: true,
0|navimed  |       _url: 'wss://localhost/v2',
0|navimed  |       _req: null,
0|navimed  |       [Symbol(shapeMode)]: false,
0|navimed  |       [Symbol(kCapture)]: false
0|navimed  |     },
0|navimed  |     [Symbol(kType)]: 'error',
0|navimed  |     [Symbol(kError)]: AggregateError [ECONNREFUSED]: 
0|navimed  |         at internalConnectMultiple (node:net:1122:18)
0|navimed  |         at afterConnectMultiple (node:net:1689:7) {
0|navimed  |       code: 'ECONNREFUSED',
0|navimed  |       [errors]: [Array]
0|navimed  |     },
0|navimed  |     [Symbol(kMessage)]: ''
0|navimed  |   }
0|navimed  | }
0|navimed  | 2:44:01 AM [express] ğŸ”„ Retrying platform initialization...
^C