
# Check PM2 status
pm2 status

# Check the error logs
pm2 logs navimed --lines 50 --nostream

# Restart the server
pm2 restart navimed

# If restart fails, check what went wrong
pm2 describe navimed
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1898914  â”‚ 75s    â”‚ 15   â”‚ online    â”‚ 0%       â”‚ 151.2mb  â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[TAILING] Tailing last 50 lines for [navimed] process (change the value with --lines option)
/root/.pm2/logs/navimed-error-0.log last 50 lines:
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | SMTP environment variables not set. Email functionality will be disabled.
0|navimed  | Required: SMTP_HOST, SMTP_USER, SMTP_PASS
0|navimed  | âš ï¸ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined

/root/.pm2/logs/navimed-out-0.log last 50 lines:
0|navimed  | 3:37:16 PM [express] GET /api/platform/stats 200 in 2ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | 3:38:07 PM [express] GET /api/platform/stats 200 in 1ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | 3:38:19 PM [express] GET /api/platform/stats 200 in 1ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | 3:38:51 PM [express] GET /api/platform/stats 200 in 1ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | 3:39:38 PM [express] GET /api/platform/stats 200 in 1ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | ğŸ§ª Registering simple test routes...
0|navimed  | âœ… Simple test routes registered successfully
0|navimed  | ğŸ”’ Applying security middleware for BREACH protection...
0|navimed  | ğŸ“¦ Registering inventory management routes...
0|navimed  | âœ… Inventory management routes registered successfully
0|navimed  | ğŸ“š Registering patient engagement routes...
0|navimed  | âœ… Patient engagement routes registered successfully
0|navimed  | ğŸ”§ Registering developer portal routes...
0|navimed  | âœ… Developer portal routes registered successfully
0|navimed  | ğŸ“Š Registering analytics routes...
0|navimed  | ğŸ“Š Skipping duplicate platform-stats registration (exists in routes.ts)
0|navimed  | âœ… Analytics routes registered successfully
0|navimed  | ğŸ¥ Registering DICOM medical imaging routes...
0|navimed  | âœ… DICOM medical imaging routes registered successfully
0|navimed  | âœ… BI Reports endpoints registered successfully
0|navimed  | Server running on port 5000
0|navimed  | 3:43:25 PM [express] serving on port 5000
0|navimed  | 3:43:27 PM [express] âœ“ Platform tenant already exists
0|navimed  | 3:43:27 PM [express] âœ“ Super admin already exists
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | âœ“ Comprehensive countries already initialized
0|navimed  | 3:43:27 PM [express] âœ“ Platform initialization complete
0|navimed  | 3:43:51 PM [express] GET /api/platform/stats 200 in 5ms :: {"platform":"NaviMED Healthcare Platform"â€¦
0|navimed  | ğŸ§ª Registering simple test routes...
0|navimed  | âœ… Simple test routes registered successfully
0|navimed  | ğŸ”’ Applying security middleware for BREACH protection...
0|navimed  | ğŸ“¦ Registering inventory management routes...
0|navimed  | âœ… Inventory management routes registered successfully
0|navimed  | ğŸ“š Registering patient engagement routes...
0|navimed  | âœ… Patient engagement routes registered successfully
0|navimed  | ğŸ”§ Registering developer portal routes...
0|navimed  | âœ… Developer portal routes registered successfully
0|navimed  | ğŸ“Š Registering analytics routes...
0|navimed  | ğŸ“Š Skipping duplicate platform-stats registration (exists in routes.ts)
0|navimed  | âœ… Analytics routes registered successfully
0|navimed  | ğŸ¥ Registering DICOM medical imaging routes...
0|navimed  | âœ… DICOM medical imaging routes registered successfully
0|navimed  | âœ… BI Reports endpoints registered successfully
0|navimed  | Server running on port 5000
0|navimed  | 3:43:54 PM [express] serving on port 5000
0|navimed  | 3:43:56 PM [express] âœ“ Platform tenant already exists
0|navimed  | 3:43:56 PM [express] âœ“ Super admin already exists
0|navimed  | ğŸŒ Initializing default countries...
0|navimed  | âœ“ Comprehensive countries already initialized
0|navimed  | 3:43:56 PM [express] âœ“ Platform initialization complete

Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [navimed](ids: [ 0 ])
[PM2] [navimed](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1899067  â”‚ 0s     â”‚ 16   â”‚ online    â”‚ 0%       â”‚ 17.6mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Describing process with id 0 - name navimed 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ status            â”‚ online                                                      â”‚
â”‚ name              â”‚ navimed                                                     â”‚
â”‚ namespace         â”‚ default                                                     â”‚
â”‚ version           â”‚ 1.0.0                                                       â”‚
â”‚ restarts          â”‚ 16                                                          â”‚
â”‚ uptime            â”‚ 0s                                                          â”‚
â”‚ script path       â”‚ /var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js â”‚
â”‚ script args       â”‚ N/A                                                         â”‚
â”‚ error log path    â”‚ /root/.pm2/logs/navimed-error-0.log                         â”‚
â”‚ out log path      â”‚ /root/.pm2/logs/navimed-out-0.log                           â”‚
â”‚ pid path          â”‚ /root/.pm2/pids/navimed-0.pid                               â”‚
â”‚ interpreter       â”‚ node                                                        â”‚
â”‚ interpreter args  â”‚ N/A                                                         â”‚
â”‚ script id         â”‚ 0                                                           â”‚
â”‚ exec cwd          â”‚ /var/www/vhosts/navimedi.org/httpdocs/NaviMed               â”‚
â”‚ exec mode         â”‚ fork_mode                                                   â”‚
â”‚ node.js version   â”‚ 20.19.5                                                     â”‚
â”‚ node env          â”‚ production                                                  â”‚
â”‚ watch & reload    â”‚ âœ˜                                                           â”‚
â”‚ unstable restarts â”‚ 0                                                           â”‚
â”‚ created at        â”‚ 2025-11-09T15:45:09.504Z                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Actions available 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ km:heapdump            â”‚
â”‚ km:cpu:profiling:start â”‚
â”‚ km:cpu:profiling:stop  â”‚
â”‚ km:heap:sampling:start â”‚
â”‚ km:heap:sampling:stop  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Trigger via: pm2 trigger navimed <action_name>

 Divergent env variables from local env 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SSH_CONNECTION â”‚ 127.0.0.1 47166 127.0.0.1 22 â”‚
â”‚ XDG_SESSION_ID â”‚ 25130                        â”‚
â”‚ SSH_CLIENT     â”‚ 127.0.0.1 47166 22           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 Add your own code metrics: http://bit.ly/code-metrics
 Use `pm2 logs navimed [--lines 1000]` to display logs
 Use `pm2 env 0` to display environment variables
 Use `pm2 monit` to monitor CPU and Memory usage navimed
[root@wizardly-swirles NaviMed]# 