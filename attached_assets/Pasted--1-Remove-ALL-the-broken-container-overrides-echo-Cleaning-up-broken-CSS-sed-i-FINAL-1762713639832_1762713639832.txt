
# 1. Remove ALL the broken container overrides
echo "=== Cleaning up broken CSS ==="
sed -i '/FINAL override/,/max-width: 1600px !important; }/d' client/src/index.css
sed -i '/Override Tailwind container/,/}/d' client/src/index.css

# 2. Add PROPERLY FORMATTED override at the very end
cat >> client/src/index.css << 'EOF'

/* Container override - MUST be last! */
.container { max-width: 1600px !important; }
@media (min-width: 640px) { 
  .container { max-width: 1600px !important; } 
}
@media (min-width: 768px) { 
  .container { max-width: 1600px !important; } 
}
@media (min-width: 1024px) { 
  .container { max-width: 1600px !important; } 
}
@media (min-width: 1280px) { 
  .container { max-width: 1600px !important; } 
}
@media (min-width: 1536px) { 
  .container { max-width: 1600px !important; } 
}
EOF

# 3. Rebuild and verify NO syntax errors
npm run build 2>&1 | tee /tmp/build.log
grep -i "syntax-error\|WARNING.*Expected" /tmp/build.log && echo "âŒ STILL HAS ERRORS" || echo "âœ… NO SYNTAX ERRORS"

bash post-build.sh
pm2 restart navimed

echo "âœ… CSS syntax fixed - wide layout should work now!"
=== Cleaning up broken CSS ===

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
transforming...
âœ“ 3668 modules transformed.
rendering chunks...
warnings when minifying css:
â–² [WARNING] Expected "}" to go with "{" [css-syntax-error]

    <stdin>:771:0:
      771 â”‚ 
          â”‚ ^
          â•µ }

  The unbalanced "{" is here:

    <stdin>:742:27:
      742 â”‚ @media (min-width: 1280px) {
          â•µ                            ^


[plugin:vite:reporter] [plugin vite:reporter] 
(!) /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/queryClient.ts is dynamically imported by /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/communication-viewer.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/language-manager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/language-manager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-orders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-results-reporting.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-results.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medical-communications.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medical-communications.tsx but also statically imported by /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/App.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/admin/AdminPermissionsManager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/dashboard/department-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/change-password-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/visit-summary-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/vital-signs-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/hospital/HospitalUserRoleManagement.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/patient/PatientAccessRequestManager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/pharmacy/UserRolesManagement.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/ui/currency-settings.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/hooks/useCurrency.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/dashboard-invalidation.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/enhanced-mutations.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/admin-counter-reset.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/admin-medical-codes-simple.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/advertisements.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/allergy-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/appointments.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/bi-reports.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/billing-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/billing.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/checkout-simple.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/checkout.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/developer-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/doctor-calendar.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/document-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/forgot-password.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-recommendations.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-reminders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-surveys.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/hospital-billing.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/inventory-audits.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-orders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/laboratory-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/leave-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/login.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medication-insurance-claims.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-education.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-login.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patients.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/pharmacy-customers.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/post-lab-results.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/prescriptions.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/profile-settings.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/receptionist-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/reports.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/reset-password.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/service-pricing-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/staff-scheduling.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/subscribe.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/super-admin-client-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/super-admin-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/supplier-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/supplier-signup.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/time-tracking.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/user-roles.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/white-label-settings.tsx, dynamic import will not move module into another chunk.

computing gzip size...
../dist/public/index.html                                          10.03 kB â”‚ gzip:   2.90 kB
../dist/public/assets/JPG_1753663321927-DgkMhBd3.jpg               55.42 kB
../dist/public/assets/image_1754352650858-BnYJl1Ml.png             96.44 kB
../dist/public/assets/image_1754352725355-BnK0MoBJ.png            117.79 kB
../dist/public/assets/image_1754352574197-4KYOPGEO.png            185.50 kB
../dist/public/assets/image_1754352599331-Dgf1L21r.png            203.98 kB
../dist/public/assets/image_1754352626174-D1C0mYbb.png            207.51 kB
../dist/public/assets/image_1754352767570-D0Cxo8da.png          6,887.79 kB
../dist/public/assets/index-7PGr453c.css                           82.23 kB â”‚ gzip:  13.17 kB
../dist/public/assets/payment-success-BctbzHA5.js                   1.49 kB â”‚ gzip:   0.64 kB
../dist/public/assets/subscription-success-Pfg6HCjz.js              2.09 kB â”‚ gzip:   0.83 kB
../dist/public/assets/checkout-DJY6O14C.js                          2.16 kB â”‚ gzip:   0.75 kB
../dist/public/assets/checkout-simple-Cx9vnUMv.js                   3.00 kB â”‚ gzip:   1.35 kB
../dist/public/assets/subscribe-pcI3-dS-.js                         3.35 kB â”‚ gzip:   1.34 kB
../dist/public/assets/laboratories-C1B3ELyF.js                      3.64 kB â”‚ gzip:   1.33 kB
../dist/public/assets/platform-overview-CMnMQuu1.js                 3.84 kB â”‚ gzip:   1.24 kB
../dist/public/assets/billing-insurance-BbEgQ3Tp.js                 4.06 kB â”‚ gzip:   1.23 kB
../dist/public/assets/laboratory-order-processing-nRJPJCHe.js       4.16 kB â”‚ gzip:   1.28 kB
../dist/public/assets/clinics-BSKKIYJM.js                           4.28 kB â”‚ gzip:   1.51 kB
../dist/public/assets/security-compliance-DZ7zIYbR.js               4.57 kB â”‚ gzip:   1.34 kB
../dist/public/assets/organization-setup-CyMh-opk.js                4.62 kB â”‚ gzip:   1.40 kB
../dist/public/assets/electronic-health-records-BFU_nFDu.js         4.73 kB â”‚ gzip:   1.43 kB
../dist/public/assets/prescription-management-Cmtk_0gF.js           4.74 kB â”‚ gzip:   1.42 kB
../dist/public/assets/clinical-documentation-QP3Ze98I.js            4.80 kB â”‚ gzip:   1.41 kB
../dist/public/assets/help-center-CtaiGFV0.js                       4.85 kB â”‚ gzip:   1.70 kB
../dist/public/assets/contact-DLDR9F8Z.js                           5.08 kB â”‚ gzip:   1.37 kB
../dist/public/assets/payment-demo-CYfaxDEN.js                      5.52 kB â”‚ gzip:   1.47 kB
../dist/public/assets/status-yn927eEG.js                            5.59 kB â”‚ gzip:   1.54 kB
../dist/public/assets/getting-started-DVtjRYFJ.js                   5.93 kB â”‚ gzip:   1.48 kB
../dist/public/assets/appointment-scheduling-DkWkCIA8.js            6.60 kB â”‚ gzip:   1.73 kB
../dist/public/assets/patient-management-CEp8YXHP.js                6.64 kB â”‚ gzip:   1.81 kB
../dist/public/assets/video-integration-options-rdjGEgaH.js         7.49 kB â”‚ gzip:   1.89 kB
../dist/public/assets/pharmacy-inventory-BQ8MmWa7.js                7.51 kB â”‚ gzip:   2.12 kB
../dist/public/assets/api-docs-BR6pxwSg.js                          7.59 kB â”‚ gzip:   2.13 kB
../dist/public/assets/billing-management-BRfiwakI.js                7.71 kB â”‚ gzip:   2.12 kB
../dist/public/assets/youtube-integration-dgdZqOa-.js               7.97 kB â”‚ gzip:   2.22 kB
../dist/public/assets/inventory-audits-DwS7ySHx.js                  8.04 kB â”‚ gzip:   2.49 kB
../dist/public/assets/trial-status-BP9QfNgg.js                      8.15 kB â”‚ gzip:   2.19 kB
../dist/public/assets/pharmacy-billing-BjFPOAo7.js                  8.60 kB â”‚ gzip:   2.35 kB
../dist/public/assets/integrations-CwG2vzk2.js                      9.10 kB â”‚ gzip:   2.92 kB
../dist/public/assets/hospitals-Dhkj6JEU.js                         9.69 kB â”‚ gzip:   2.66 kB
../dist/public/assets/api-docs-DL6sXxDA.js                          9.70 kB â”‚ gzip:   2.76 kB
../dist/public/assets/vimeo-integration-aObp-NTa.js                10.01 kB â”‚ gzip:   2.39 kB
../dist/public/assets/laboratory-billing-D5u59DIJ.js               10.38 kB â”‚ gzip:   3.13 kB
../dist/public/assets/aws-integration-B3mMDMiO.js                  12.36 kB â”‚ gzip:   2.80 kB
../dist/public/assets/achievements-BB-2THGd.js                     12.60 kB â”‚ gzip:   2.55 kB
../dist/public/assets/prescription-archives-BeAGsSN1.js            13.28 kB â”‚ gzip:   3.34 kB
../dist/public/assets/user-account-configuration-D4LwH6u8.js       14.00 kB â”‚ gzip:   3.33 kB
../dist/public/assets/troubleshooting-guide-BmDFvnrj.js            14.13 kB â”‚ gzip:   4.10 kB
../dist/public/assets/video-player-BKQSDO3p.js                     16.26 kB â”‚ gzip:   4.41 kB
../dist/public/assets/initial-system-configuration-CpnI5s2c.js     17.47 kB â”‚ gzip:   3.75 kB
../dist/public/assets/quick-reference-guide-DuKcU21W.js            17.63 kB â”‚ gzip:   3.89 kB
../dist/public/assets/pharmacy-customers-BMC1CiCg.js               19.30 kB â”‚ gzip:   4.75 kB
../dist/public/assets/workflow-training-modules-CLGplsvV.js        19.31 kB â”‚ gzip:   4.26 kB
../dist/public/assets/role-based-access-setup-Dw6aD3WW.js          19.72 kB â”‚ gzip:   4.24 kB
../dist/public/assets/laboratory-registration-BbOVpQHP.js          20.05 kB â”‚ gzip:   4.55 kB
../dist/public/assets/first-patient-registration-DyTwIY7x.js       20.25 kB â”‚ gzip:   4.14 kB
../dist/public/assets/medication-insurance-claims-Cz5cZZu1.js      20.67 kB â”‚ gzip:   5.05 kB
../dist/public/assets/comprehensive-user-training-C0jiwId8.js      21.46 kB â”‚ gzip:   4.49 kB
../dist/public/assets/lab-sample-management-y9MATenb.js            21.59 kB â”‚ gzip:   4.44 kB
../dist/public/assets/hospital-billing-BrSPDDRf.js                 21.87 kB â”‚ gzip:   4.47 kB
../dist/public/assets/lab-test-management-DYqZ-FPT.js              24.09 kB â”‚ gzip:   4.81 kB
../dist/public/assets/lab-results-reporting-8_9rV-Ds.js            25.20 kB â”‚ gzip:   6.19 kB
../dist/public/assets/system-admin-training-D02UTKy6.js            25.49 kB â”‚ gzip:   5.40 kB
../dist/public/assets/lab-inventory-management-D-3Ca6Cv.js         26.18 kB â”‚ gzip:   5.57 kB
../dist/public/assets/profile-settings-NHtvmhaZ.js                 27.64 kB â”‚ gzip:   6.28 kB
../dist/public/assets/documentation-D53IcoUQ.js                    29.12 kB â”‚ gzip:   7.35 kB
../dist/public/assets/currency-management-IEvvAuSW.js              43.66 kB â”‚ gzip:  12.12 kB
../dist/public/assets/lab-analytics-dashboard-BrxCYPs_.js          44.68 kB â”‚ gzip:  11.09 kB
../dist/public/assets/index-C1jEwlvB.js                         4,057.86 kB â”‚ gzip: 922.10 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
âœ“ built in 14.50s

  dist/index.js  1003.0kb

âš¡ Done in 37ms
â–² [WARNING] Expected "}" to go with "{" [css-syntax-error]
âŒ STILL HAS ERRORS
ğŸ“¦ Syncing built assets from dist/public to server/public...
âœ… Assets synced successfully with rsync!
   dist/public â†’ server/public
   21 files synced
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [navimed](ids: [ 0 ])
[PM2] [navimed](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1916264  â”‚ 0s     â”‚ 28   â”‚ online    â”‚ 0%       â”‚ 17.8mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… CSS syntax fixed - wide layout should work now!
[root@wizardly-swirles NaviMed]# 