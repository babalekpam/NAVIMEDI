Service worker updated - rebuild complete
[root@wizardly-swirles NaviMed]# # Check PM2 logs to see the error
pm2 logs navimed --lines 50 --nostream
[TAILING] Tailing last 50 lines for [navimed] process (change the value with --lines option)
/root/.pm2/logs/navimed-out.log last 50 lines:
0|navimed  | tialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:43:23 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:43:25 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:43:35 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:43:37 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:43:47 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:43:49 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:43:59 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:01 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:11 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:13 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:23 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:25 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:35 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:37 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:47 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:49 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:59 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:01 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:11 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:13 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:23 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:25 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:35 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:37 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1

/root/.pm2/logs/navimed-error.log last 50 lines:
0|navimed  |     at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
0|navimed  |     at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
0|navimed  |     at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
0|navimed  |     at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
0|navimed  |     at ModuleJob._link (node:internal/modules/esm/module_job:168:49) {
0|navimed  |   code: 'ERR_MODULE_NOT_FOUND'
0|navimed  | }
0|navimed  | Error [ERR_MODULE_NOT_FOUND]: Cannot find package '@vitejs/plugin-react' imported from /var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js
0|navimed  |     at packageResolve (node:internal/modules/esm/resolve:873:9)
0|navimed  |     at moduleResolve (node:internal/modules/esm/resolve:946:18)
0|navimed  |     at defaultResolve (node:internal/modules/esm/resolve:1188:11)
0|navimed  |     at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
0|navimed  |     at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
0|navimed  |     at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
0|navimed  |     at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
0|navimed  |     at ModuleJob._link (node:internal/modules/esm/module_job:168:49) {
0|navimed  |   code: 'ERR_MODULE_NOT_FOUND'
0|navimed  | }
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)

[root@wizardly-swirles NaviMed]# cd /var/www/vhosts/navimedi.org/httpdocs/NaviMed

# Check if .env file exists
ls -la .env

# Restart PM2 with environment variables loaded
pm2 restart navimed --update-env

# Check if it's running
pm2 status
-rw-r--r--. 1 root root 305 Nov  9 13:15 .env
[PM2] Applying action restartProcessId on app [navimed](ids: [ 0 ])
[PM2] [navimed](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1883326  â”‚ 0s     â”‚ 2    â”‚ online    â”‚ 0%       â”‚ 17.6mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1883326  â”‚ 0s     â”‚ 2    â”‚ online    â”‚ 0%       â”‚ 62.5mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[root@wizardly-swirles NaviMed]# # Check PM2 status
pm2 status

# Check recent logs
pm2 logs navimed --lines 20 --nostream
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name       â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ navimed    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 1883326  â”‚ 3m     â”‚ 2    â”‚ online    â”‚ 0%       â”‚ 114.7mb  â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[TAILING] Tailing last 20 lines for [navimed] process (change the value with --lines option)
/root/.pm2/logs/navimed-out.log last 20 lines:
0|navimed  | cription", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:47 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:44:49 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:44:59 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:01 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:11 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:13 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:23 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:25 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1
0|navimed  | 11:45:35 PM [express] ğŸ”„ Retrying platform initialization...
0|navimed  | 11:45:37 PM [express] âŒ Platform initialization failed: Error: Failed query: select "id", "name", "type", "subdomain", "country_id", "settings", "is_active", "parent_tenant_id", "organization_type", "brand_name", "logo_url", "primary_color", "secondary_color", "custom_domain", "custom_css", "default_language", "supported_languages", "base_currency", "supported_currencies", "offline_enabled", "offline_storage_mb", "sync_frequency_minutes", "trial_start_date", "trial_end_date", "subscription_status", "last_suspension_check", "suspended_at", "suspension_reason", "phone_number", "address", "description", "created_at", "updated_at" from "tenants" where "tenants"."subdomain" = $1 limit $2
0|navimed  | params: argilette,1

/root/.pm2/logs/navimed-error.log last 20 lines:
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|navimed  | Error: DATABASE_URL must be set. Did you forget to provision a database?
0|navimed  |     at server/db.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5263:13)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at server/storage.ts (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:5479:5)
0|navimed  |     at __init (file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:4:56)
0|navimed  |     at file:///var/www/vhosts/navimedi.org/httpdocs/NaviMed/dist/index.js:12155:1
0|navimed  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|navimed  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)

[root@wizardly-swirles NaviMed]# 